(()=>{"use strict";var e,t,n,r,o,_,l,i,c={},u=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(e,t){for(var n in t)e[n]=t[n];return e}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function f(e,r,o,_,l){var i={type:e,props:r,key:o,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==l?++n:l};return null==l&&null!=t.vnode&&t.vnode(i),i}function p(e){return e.children}function h(e,t){this.props=e,this.context=t}function v(e,t){if(null==t)return e.__?v(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?v(e):null}function m(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return m(e)}}function y(e){(!e.__d&&(e.__d=!0)&&r.push(e)&&!g.__r++||o!==t.debounceRendering)&&((o=t.debounceRendering)||_)(g)}function g(){var e,t,n,o,_,i,c,u;for(r.sort(l);e=r.shift();)e.__d&&(t=r.length,o=void 0,_=void 0,c=(i=(n=e).__v).__e,(u=n.__P)&&(o=[],(_=a({},i)).__v=i.__v+1,L(u,i,_,n.__n,void 0!==u.ownerSVGElement,null!=i.__h?[c]:null,o,null==c?v(i):c,i.__h),N(o,i),i.__e!=c&&m(i)),r.length>t&&r.sort(l));g.__r=0}function b(e,t,n,r,o,_,l,i,s,a){var d,h,m,y,g,b,w,E=r&&r.__k||u,S=E.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(y=n.__k[d]=null==(y=t[d])||"boolean"==typeof y||"function"==typeof y?null:"string"==typeof y||"number"==typeof y||"bigint"==typeof y?f(null,y,null,null,y):Array.isArray(y)?f(p,{children:y},null,null,null):y.__b>0?f(y.type,y.props,y.key,y.ref?y.ref:null,y.__v):y)){if(y.__=n,y.__b=n.__b+1,null===(m=E[d])||m&&y.key==m.key&&y.type===m.type)E[d]=void 0;else for(h=0;h<S;h++){if((m=E[h])&&y.key==m.key&&y.type===m.type){E[h]=void 0;break}m=null}L(e,y,m=m||c,o,_,l,i,s,a),g=y.__e,(h=y.ref)&&m.ref!=h&&(w||(w=[]),m.ref&&w.push(m.ref,null,y),w.push(h,y.__c||g,y)),null!=g?(null==b&&(b=g),"function"==typeof y.type&&y.__k===m.__k?y.__d=s=C(y,s,e):s=k(e,y,m,E,g,s),"function"==typeof n.type&&(n.__d=s)):s&&m.__e==s&&s.parentNode!=e&&(s=v(m))}for(n.__e=b,d=S;d--;)null!=E[d]&&("function"==typeof n.type&&null!=E[d].__e&&E[d].__e==n.__d&&(n.__d=x(r).nextSibling),D(E[d],E[d]));if(w)for(d=0;d<w.length;d++)P(w[d],w[++d],w[++d])}function C(e,t,n){for(var r,o=e.__k,_=0;o&&_<o.length;_++)(r=o[_])&&(r.__=e,t="function"==typeof r.type?C(r,t,n):k(n,r,r,o,r.__e,t));return t}function k(e,t,n,r,o,_){var l,i,c;if(void 0!==t.__d)l=t.__d,t.__d=void 0;else if(null==n||o!=_||null==o.parentNode)e:if(null==_||_.parentNode!==e)e.appendChild(o),l=null;else{for(i=_,c=0;(i=i.nextSibling)&&c<r.length;c+=1)if(i==o)break e;e.insertBefore(o,_),l=_}return void 0!==l?l:o.nextSibling}function x(e){var t,n,r;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(r=x(n)))return r;return null}function w(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||s.test(t)?n:n+"px"}function E(e,t,n,r,o){var _;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||w(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||w(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])_=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+_]=n,n?r||e.addEventListener(t,_?H:S,_):e.removeEventListener(t,_?H:S,_);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function S(e){return this.l[e.type+!1](t.event?t.event(e):e)}function H(e){return this.l[e.type+!0](t.event?t.event(e):e)}function L(e,n,r,o,_,l,i,c,u){var s,d,f,v,m,y,g,C,k,x,w,E,S,H,L,N=n.type;if(void 0!==n.constructor)return null;null!=r.__h&&(u=r.__h,c=n.__e=r.__e,n.__h=null,l=[c]),(s=t.__b)&&s(n);try{e:if("function"==typeof N){if(C=n.props,k=(s=N.contextType)&&o[s.__c],x=s?k?k.props.value:s.__:o,r.__c?g=(d=n.__c=r.__c).__=d.__E:("prototype"in N&&N.prototype.render?n.__c=d=new N(C,x):(n.__c=d=new h(C,x),d.constructor=N,d.render=M),k&&k.sub(d),d.props=C,d.state||(d.state={}),d.context=x,d.__n=o,f=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=N.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=a({},d.__s)),a(d.__s,N.getDerivedStateFromProps(C,d.__s))),v=d.props,m=d.state,d.__v=n,f)null==N.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==N.getDerivedStateFromProps&&C!==v&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(C,x),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(C,d.__s,x)||n.__v===r.__v){for(n.__v!==r.__v&&(d.props=C,d.state=d.__s,d.__d=!1),d.__e=!1,n.__e=r.__e,n.__k=r.__k,n.__k.forEach((function(e){e&&(e.__=n)})),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[],d.__h.length&&i.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(C,d.__s,x),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(v,m,y)}))}if(d.context=x,d.props=C,d.__P=e,E=t.__r,S=0,"prototype"in N&&N.prototype.render){for(d.state=d.__s,d.__d=!1,E&&E(n),s=d.render(d.props,d.state,d.context),H=0;H<d._sb.length;H++)d.__h.push(d._sb[H]);d._sb=[]}else do{d.__d=!1,E&&E(n),s=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++S<25);d.state=d.__s,null!=d.getChildContext&&(o=a(a({},o),d.getChildContext())),f||null==d.getSnapshotBeforeUpdate||(y=d.getSnapshotBeforeUpdate(v,m)),L=null!=s&&s.type===p&&null==s.key?s.props.children:s,b(e,Array.isArray(L)?L:[L],n,r,o,_,l,i,c,u),d.base=n.__e,n.__h=null,d.__h.length&&i.push(d),g&&(d.__E=d.__=null),d.__e=!1}else null==l&&n.__v===r.__v?(n.__k=r.__k,n.__e=r.__e):n.__e=T(r.__e,n,r,o,_,l,i,u);(s=t.diffed)&&s(n)}catch(e){n.__v=null,(u||null!=l)&&(n.__e=c,n.__h=!!u,l[l.indexOf(c)]=null),t.__e(e,n,r)}}function N(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function T(t,n,r,o,_,l,i,u){var s,a,f,p=r.props,h=n.props,m=n.type,y=0;if("svg"===m&&(_=!0),null!=l)for(;y<l.length;y++)if((s=l[y])&&"setAttribute"in s==!!m&&(m?s.localName===m:3===s.nodeType)){t=s,l[y]=null;break}if(null==t){if(null===m)return document.createTextNode(h);t=_?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,h.is&&h),l=null,u=!1}if(null===m)p===h||u&&t.data===h||(t.data=h);else{if(l=l&&e.call(t.childNodes),a=(p=r.props||c).dangerouslySetInnerHTML,f=h.dangerouslySetInnerHTML,!u){if(null!=l)for(p={},y=0;y<t.attributes.length;y++)p[t.attributes[y].name]=t.attributes[y].value;(f||a)&&(f&&(a&&f.__html==a.__html||f.__html===t.innerHTML)||(t.innerHTML=f&&f.__html||""))}if(function(e,t,n,r,o){var _;for(_ in n)"children"===_||"key"===_||_ in t||E(e,_,null,n[_],r);for(_ in t)o&&"function"!=typeof t[_]||"children"===_||"key"===_||"value"===_||"checked"===_||n[_]===t[_]||E(e,_,t[_],n[_],r)}(t,h,p,_,u),f)n.__k=[];else if(y=n.props.children,b(t,Array.isArray(y)?y:[y],n,r,o,_&&"foreignObject"!==m,l,i,l?l[0]:r.__k&&v(r,0),u),null!=l)for(y=l.length;y--;)null!=l[y]&&d(l[y]);u||("value"in h&&void 0!==(y=h.value)&&(y!==t.value||"progress"===m&&!y||"option"===m&&y!==p.value)&&E(t,"value",y,p.value,!1),"checked"in h&&void 0!==(y=h.checked)&&y!==t.checked&&E(t,"checked",y,p.checked,!1))}return t}function P(e,n,r){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,r)}}function D(e,n,r){var o,_;if(t.unmount&&t.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||P(o,null,n)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){t.__e(e,n)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(_=0;_<o.length;_++)o[_]&&D(o[_],n,r||"function"!=typeof e.type);r||null==e.__e||d(e.__e),e.__=e.__e=e.__d=void 0}function M(e,t,n){return this.constructor(e,n)}e=u.slice,t={__e:function(e,t,n,r){for(var o,_,l;t=t.__;)if((o=t.__c)&&!o.__)try{if((_=o.constructor)&&null!=_.getDerivedStateFromError&&(o.setState(_.getDerivedStateFromError(e)),l=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),l=o.__d),l)return o.__E=o}catch(t){e=t}throw e}},n=0,h.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),"function"==typeof e&&(e=e(a({},n),this.props)),e&&a(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),y(this))},h.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),y(this))},h.prototype.render=p,r=[],_="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function(e,t){return e.__v.__b-t.__v.__b},g.__r=0,i=0;var A=0;function I(e,n,r,o,_,l){var i,c,u={};for(c in n)"ref"==c?i=n[c]:u[c]=n[c];var s={type:e,props:u,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--A,__source:_,__self:l};if("function"==typeof e&&(i=e.defaultProps))for(c in i)void 0===u[c]&&(u[c]=i[c]);return t.vnode&&t.vnode(s),s}var U,W,F,V,O=0,Z=[],B=[],j=t.__b,J=t.__r,R=t.diffed,$=t.__c,q=t.unmount;function G(e,n){t.__h&&t.__h(W,e,O||n),O=0;var r=W.__H||(W.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:B}),r.__[e]}function X(e){return O=1,function(e,t){var n=G(U++,2);if(n.t=e,!n.__c&&(n.__=[oe(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0],r=n.t(t,e);t!==r&&(n.__N=[r,n.__[1]],n.__c.setState({}))}],n.__c=W,!W.u)){var r=function(e,t,r){if(!n.__c.__H)return!0;var _=n.__c.__H.__.filter((function(e){return e.__c}));if(_.every((function(e){return!e.__N})))return!o||o.call(this,e,t,r);var l=!1;return _.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(l=!0)}})),!(!l&&n.__c.props===e)&&(!o||o.call(this,e,t,r))};W.u=!0;var o=W.shouldComponentUpdate,_=W.componentWillUpdate;W.componentWillUpdate=function(e,t,n){if(this.__e){var l=o;o=void 0,r(e,t,n),o=l}_&&_.call(this,e,t,n)},W.shouldComponentUpdate=r}return n.__N||n.__}(oe,e)}function Y(e,n){var r=G(U++,3);!t.__s&&re(r.__H,n)&&(r.__=e,r.i=n,W.__H.__h.push(r))}function z(e){return O=5,function(e,t){var n=G(U++,7);return re(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}((function(){return{current:e}}),[])}function K(){for(var e;e=Z.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(te),e.__H.__h.forEach(ne),e.__H.__h=[]}catch(n){e.__H.__h=[],t.__e(n,e.__v)}}t.__b=function(e){W=null,j&&j(e)},t.__r=function(e){J&&J(e),U=0;var t=(W=e.__c).__H;t&&(F===W?(t.__h=[],W.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=B,e.__N=e.i=void 0}))):(t.__h.forEach(te),t.__h.forEach(ne),t.__h=[])),F=W},t.diffed=function(e){R&&R(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(1!==Z.push(n)&&V===t.requestAnimationFrame||((V=t.requestAnimationFrame)||ee)(K)),n.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==B&&(e.__=e.__V),e.i=void 0,e.__V=B}))),F=W=null},t.__c=function(e,n){n.some((function(e){try{e.__h.forEach(te),e.__h=e.__h.filter((function(e){return!e.__||ne(e)}))}catch(r){n.some((function(e){e.__h&&(e.__h=[])})),n=[],t.__e(r,e.__v)}})),$&&$(e,n)},t.unmount=function(e){q&&q(e);var n,r=e.__c;r&&r.__H&&(r.__H.__.forEach((function(e){try{te(e)}catch(e){n=e}})),r.__H=void 0,n&&t.__e(n,r.__v))};var Q="function"==typeof requestAnimationFrame;function ee(e){var t,n=function(){clearTimeout(r),Q&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Q&&(t=requestAnimationFrame(n))}function te(e){var t=W,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),W=t}function ne(e){var t=W;e.__c=e.__(),W=t}function re(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function oe(e,t){return"function"==typeof t?t(e):t}const _e=e=>{try{return"string"!=typeof e?null:JSON.parse(e)}catch(e){return null}};function le(e,t,n,r){return e?(e.addEventListener(t,n,r??!1),()=>e.removeEventListener(t,n,r??!1)):()=>{}}const ie=function(e,t){var n={__c:t="__cC"+i++,__:null,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,y(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}(),ce=({children:e,initState:t})=>{const n=X(t),[r]=n;return document.body.classList.toggle("dark",r),localStorage.setItem("shoppingListDark",`${r}`),I(ie.Provider,{value:n,children:e})};function ue(){const[e,t]=(()=>{const e=function(e){var t=W.context[e.__c],n=G(U++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(W)),t.props.value):e.__}(ie);if(!e)throw new Error("theme context not defined");return e})();return I(p,{children:[I("svg",{onClick:()=>t(!e),class:"w-6 h-6 block dark:hidden",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[I("path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",fill:"#1C274C"}),I("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 1.25C12.4142 1.25 12.75 1.58579 12.75 2V4C12.75 4.41421 12.4142 4.75 12 4.75C11.5858 4.75 11.25 4.41421 11.25 4V2C11.25 1.58579 11.5858 1.25 12 1.25ZM3.66865 3.71609C3.94815 3.41039 4.42255 3.38915 4.72825 3.66865L6.95026 5.70024C7.25596 5.97974 7.2772 6.45413 6.9977 6.75983C6.7182 7.06553 6.2438 7.08677 5.9381 6.80727L3.71609 4.77569C3.41039 4.49619 3.38915 4.02179 3.66865 3.71609ZM20.3314 3.71609C20.6109 4.02179 20.5896 4.49619 20.2839 4.77569L18.0619 6.80727C17.7562 7.08677 17.2818 7.06553 17.0023 6.75983C16.7228 6.45413 16.744 5.97974 17.0497 5.70024L19.2718 3.66865C19.5775 3.38915 20.0518 3.41039 20.3314 3.71609ZM1.25 12C1.25 11.5858 1.58579 11.25 2 11.25H4C4.41421 11.25 4.75 11.5858 4.75 12C4.75 12.4142 4.41421 12.75 4 12.75H2C1.58579 12.75 1.25 12.4142 1.25 12ZM19.25 12C19.25 11.5858 19.5858 11.25 20 11.25H22C22.4142 11.25 22.75 11.5858 22.75 12C22.75 12.4142 22.4142 12.75 22 12.75H20C19.5858 12.75 19.25 12.4142 19.25 12ZM17.0255 17.0252C17.3184 16.7323 17.7933 16.7323 18.0862 17.0252L20.3082 19.2475C20.6011 19.5404 20.601 20.0153 20.3081 20.3082C20.0152 20.6011 19.5403 20.601 19.2475 20.3081L17.0255 18.0858C16.7326 17.7929 16.7326 17.3181 17.0255 17.0252ZM6.97467 17.0253C7.26756 17.3182 7.26756 17.7931 6.97467 18.086L4.75244 20.3082C4.45955 20.6011 3.98468 20.6011 3.69178 20.3082C3.39889 20.0153 3.39889 19.5404 3.69178 19.2476L5.91401 17.0253C6.2069 16.7324 6.68177 16.7324 6.97467 17.0253ZM12 19.25C12.4142 19.25 12.75 19.5858 12.75 20V22C12.75 22.4142 12.4142 22.75 12 22.75C11.5858 22.75 11.25 22.4142 11.25 22V20C11.25 19.5858 11.5858 19.25 12 19.25Z",fill:"#1C274C"})]}),I("svg",{onClick:()=>t(!e),class:"w-6 h-6 hidden dark:block",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:I("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 11.5373 21.3065 11.4608 21.0672 11.8568C19.9289 13.7406 17.8615 15 15.5 15C11.9101 15 9 12.0899 9 8.5C9 6.13845 10.2594 4.07105 12.1432 2.93276C12.5392 2.69347 12.4627 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"})})]})}const se=({done:e,title:t,children:n,onClickTitle:r,onChangeDone:o,removeItem:_,editTitle:l,className:i=""})=>{const[c,u]=X(!1),[s,a]=X(t),d=z(null);return Y((()=>{d.current?.focus()}),[c]),I("form",{class:"flex gap-2 items-center "+i,onSubmit:e=>{e.stopPropagation(),e.preventDefault(),l(t,s),u(!1)},children:[I("div",{children:I("input",{type:"checkbox",checked:e,onChange:()=>o({title:t,done:!e})})}),c?I("input",{class:"grow border border-blue-800 rounded-md text-black",ref:d,value:s,onInput:({currentTarget:e})=>a(e.value)}):I("div",{class:"grow "+(e?"line-through":""),onClick:()=>r({title:t}),children:t}),I("div",{class:"min-w-fit",children:[I("button",c?{type:"submit",class:"bg-blue-800 rounded-md p-1 px-2 mr-4 text-white",children:"Save"}:{type:"button",class:"bg-blue-800 rounded-md p-1 px-2 mr-4 text-white",onClick:e=>{e.preventDefault(),e.stopPropagation(),u(!0)},children:"Edit"}),I("button",{type:"button",class:"bg-red-600 rounded-md p-1 px-2 text-white",onClick:()=>{_({title:t})},children:"Delete"})]})]})},ae=(e,t)=>e.length?e.reduce(((e,t)=>e.find((e=>e.title===t))?.children??[]),t):t,de=e=>JSON.parse(JSON.stringify(e)),fe=()=>{const[e,t]=X(_e(localStorage.getItem("shoppingList"))||[]),[n,r]=X(""),[o,_]=X([]),l=z(null),i=ae(o,e),c=z(null);Y((()=>{const e=le(c.current,"pointerdown",(({clientX:e,clientY:n,target:r})=>{const o=r instanceof HTMLFormElement?r:r instanceof HTMLElement?r.closest("form"):null;if(!o)return;const l=[...o.parentElement?.children??o].findIndex((e=>e===o)),i=+new Date;let c;function u(){d(),f(),s()}const s=le(document.body,"touchend",(e=>{const t=e.changedTouches[0],n=document.elementFromPoint(t.clientX,t.clientY);c=n,a()}));function a(){const e=c instanceof HTMLFormElement?c:c instanceof HTMLElement?c.closest("form"):null;if(!e)return u();const n=[...e.parentElement?.children??e].findIndex((t=>t===e));if(n===l)return u();t((e=>{const t=de(e);let r;return _((e=>(r=ae(e,t),e))),r.splice(n,0,r.splice(l,1)[0]),console.log({list:e,newList:t}),t})),u()}const d=le(document.body,"pointerup",(e=>{if(+new Date-i<500)return u();c=e.target,a()})),f=le(document.body,"pointermove",(({clientY:t,clientX:r})=>{+new Date-i<500&&(n-t>20||e-r>20)&&(d(),f())}))}));return e}),[]);const u=({title:n})=>{if(!confirm(`Delete item (${n})?`))return;const r=de(e),_=ae(o,r),l=_.findIndex((e=>e.title===n));_.splice(l,1),t(r)},s=(n,r)=>{const _=de(e),l=ae(o,_),i=l.find((e=>e.title===n));i&&!l.some((e=>e.title===r))&&(i.title=r,t(_))},a=({title:n,done:r})=>{const _=de(e),l=ae(o,_),i=l.find((e=>e.title===n));if(!i)return l;i.done=r,t(_)},d=({title:e})=>{_((t=>{const n=de(t);return n.push(e),n}))};return localStorage.setItem("shoppingList",JSON.stringify(e)),I(p,{children:[I("div",{class:"flex flex-wrap items-center mb-2",children:[I("h1",{class:"grow text-2xl text-center",children:"Shopping List"}),I("label",{class:"bg-blue-800 rounded-md p-1 px-2 mr-4 text-white",children:["Import",I("input",{type:"file",accept:".json",onChange:async function(n){const r=()=>{n.target.value=null};try{const _=n.currentTarget.files?.[0];if(!_)return r();const l=await _.text(),i=JSON.parse(l);if(!Array.isArray(i)||!i.length||!i.every((e=>"done"in e&&"boolean"==typeof e.done&&"title"in e&&"string"==typeof e.title&&"children"in e&&Array.isArray(e.children))))throw"invalid object keys";if(!confirm("Are you sure you want to import the items from this file?"))return r();const c=de(e),u=ae(o,c);let s=!1;i.forEach((e=>{if(u.some((t=>t.title===e.title)))return s=!0;u.push(e)})),t(c),s&&alert("One or more items could not be imported as an item already exists with the same name.")}catch(n){return console.error(n),alert("Unable to import. File data invalid.")}r()},class:"hidden"})]}),I("button",{type:"button",onClick:function(){const e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(i))),e.setAttribute("download","ShoppingList.json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},class:"bg-blue-800 rounded-md p-1 px-2 mr-4 text-white",children:"Export"}),I(ue,{})]}),I("div",{class:"text-sm",children:["v","1.1.5.65"]}),I("div",{children:[o.length>0&&I("button",{type:"button",class:"bg-blue-800 rounded-md p-1 px-2 mr-4 text-white",onClick:()=>{const e=de(o);e.pop(),_(e)},children:"Back"}),o.join(" - ")]}),I("div",{ref:c,className:"grid divide-blue-800 divide-y gap-1",children:i.map((e=>I(se,{className:"pt-1",done:e.done,title:e.title,children:e.children,onClickTitle:d,onChangeDone:a,removeItem:u,editTitle:s},e.title)))}),I("form",{className:"flex gap-4 pt-2",onSubmit:_=>{if(_.preventDefault(),!n)return;const i=de(e),c=ae(o,i);c.some((e=>e.title===n))||(c.push({done:!1,title:n,children:[]}),t(i),r(""),l.current?.focus())},children:[I("input",{ref:l,class:"grow border border-blue-800 rounded-md text-black",value:n,onChange:({currentTarget:e})=>{r(e.value)}}),I("button",{type:"submit",class:"bg-blue-800 rounded-md p-1 px-2 text-white",children:"Add Item"})]})]})};let pe;navigator?.serviceWorker&&navigator.serviceWorker.addEventListener("controllerchange",(function(){pe||(window.location.reload(),pe=!0)}));const he=()=>{const[e,t]=X(null);return Y((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then((e=>{if(e.waiting)return t(e.waiting);e.addEventListener("updatefound",(()=>{const n=e.installing;n&&n.addEventListener("statechange",(()=>{"installed"===n.state&&navigator.serviceWorker.controller&&t(n)}))}))}))}),[]),e?I("div",{className:"sticky bottom-0 p-1 mt-4 bg-blue-500 text-white text-center",children:[I("span",{children:"Update available. "}),I("button",{onClick:()=>{e&&e.postMessage({type:"SKIP_WAITING"})},className:"font-bold underline",children:"Click here"}),I("span",{children:" to install."})]}):I(p,{})};!function(n,r,o){var _,l,i;t.__&&t.__(n,r),l=(_="function"==typeof o)?null:o&&o.__k||r.__k,i=[],L(r,n=(!_&&o||r).__k=function(t,n,r){var o,_,l,i={};for(l in n)"key"==l?o=n[l]:"ref"==l?_=n[l]:i[l]=n[l];if(arguments.length>2&&(i.children=arguments.length>3?e.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(l in t.defaultProps)void 0===i[l]&&(i[l]=t.defaultProps[l]);return f(t,i,o,_,null)}(p,null,[n]),l||c,c,void 0!==r.ownerSVGElement,!_&&o?[o]:l?null:r.firstChild?e.call(r.childNodes):null,i,!_&&o?o:l?l.__e:r.firstChild,_),N(i,n)}(I((()=>I(ce,{initState:_e(localStorage.getItem("shoppingListDark")||!1)||!1,children:[I(fe,{}),I(he,{})]})),{}),document.getElementById("app"))})();